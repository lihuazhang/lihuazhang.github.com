
<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
   <meta charset="utf-8" />
   <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
   <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

   <title>Cucumber-第一章 为什么使用小黄瓜？ - 8:00 PM at My House</title>
	
	<meta name="description" content="

  
    
       2012-02-21
        Cucumber 
      
       comments
    
  
  软件始于想法。

假设这个想法是一个好的创意——一个可以使世界更美好的创意，或者至少可以让某些人赚点小钱。

那么如何让软件开发者接受这...">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link href="" rel="alternate" title="8:00 PM at My House" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
   <meta name="robots" content="noindex, nofollow">
   <meta name="keywords" content="metro, metroui, metro-ui, metro ui, windows 8, metro style, bootstrap, framework, web framework, css, html" />
   <meta name="author" content="晋恒温"/>

   <!-- remove or comment this line if you want to use the local fonts -->
   <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700' rel='stylesheet' type='text/css'>

   <link rel="stylesheet" type="text/css" href="/bootmetro/css/bootstrap.css">
   <link rel="stylesheet" type="text/css" href="/bootmetro/css/bootstrap-responsive.css">
   <link rel="stylesheet" type="text/css" href="/bootmetro/css/bootmetro.css">
   <link rel="stylesheet" type="text/css" href="/bootmetro/css/bootmetro-tiles.css">
   <link rel="stylesheet" type="text/css" href="/bootmetro/css/metro-ui-light.css">
   <link rel="stylesheet" type="text/css" href="/bootmetro/css/icomoon.css">
   <link rel="stylesheet" type="text/css" href="/stylesheets/syntax.css">
   <link rel="stylesheet" type="text/css" href="/stylesheets/custom.css">

   <!-- All JavaScript at the bottom, except for Modernizr and Respond.
      Modernizr enables HTML5 elements & feature detects; Respond is a polyfill for min/max-width CSS3 Media Queries
      For optimal performance, use a custom Modernizr build: www.modernizr.com/download/ -->
   <script src="/scripts/modernizr-2.6.1.min.js"></script>
</head>
<!-- Prompt IE 6 users to install Chrome Frame. Remove this if you support IE 6.
     chromium.org/developers/how-tos/chrome-frame-getting-started -->
<!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->


<body>
<header id="nav-bar" class="container-fluid">
   <div class="row-fluid">
      <div class="span8">
         <div id="header-container">
            <a id="backbutton" class="win-backbutton" href ="javascript:history.go(-1);"></a>
            <h5>8:00 PM at My House</h5>
            <div class="dropdown">
               <a class="header-dropdown dropdown-toggle accent-color" data-toggle="dropdown" href="#">
                 Cucumber-第一章 为什么使用小黄瓜？
                  <b class="caret"></b>
               </a>
               <ul class="dropdown-menu">
               	<li><a href="/archives.html">存档</a></li>
               	<li><a href="/categories.html">分类</a></li>
               <li class="divider"></li>
               <li><a href="/index.html">Home</a></li>
            </ul>
         </div>
         </div>
      </div>
      <div id="top-info" class="pull-right">
      <a href="/about_me.html" class="pull-left">
         <div id="authorname" class="top-info-block">
           <h3>晋恒温</h3>
         </div>
         <div class="top-info-block">
            <b class="icon-user"></b>
         </div>
      </a>
   </div>
</div>
</header>


<div class="container">
<article class="entry" id="/blog/cucumber-1-post">
  <header>
    <p class="entry-meta">
      <i aria-hidden="true" class="icon-pen-alt-fill"></i> <time>2012-02-21</time>
      <i aria-hidden="true" class="icon-folder"></i> <a href="/categories.html#Cucumber-ref"> Cucumber </a>
      
      <i aria-hidden="true" class="icon-comments-3"></i> <a href="#comment">comments</a>
    </p>
  </header>
  <p>软件始于想法。</p>

<p>假设这个想法是一个好的创意——一个可以使世界更美好的创意，或者至少可以让某些人赚点小钱。</p>

<p>那么如何让软件开发者接受这个创意并且真正实现这个能带来利益的创意，就是一个巨大的挑战。</p>

<p>最初的创意是完美且优雅的。如果这个创意的主人恰巧是一个天才的软件开发人员，那么我们可能会很幸运：这个创意不需要对任何人解释就能被实现为一个能工作的软件。然而，通常更多的是，有着最初创意的人往往不是有这本事实现该创意的人。于是这个创意就不得不从一个人的脑子里跑到另外个人的脑子里。这就是沟通。<p>

<p>大多数的软件工程需要团队一起协同工作，高质量的沟通就成了成功的关键。你可能知道，好的沟通并不仅仅是清楚地想别人描述你的想法。你也需要征集大家的回馈，确保你的理解是正确的。这就是为什么敏捷软件开发团队会步步为营，不断地构建软件并向相关人士征求意见，“这是你的意思么？”。</p>

<p>然而，即便这样也是不够的。如果开发人员用两个2周的迭代实现了一个错误的想法，不仅仅是开发人员浪费了2周的精力，由于误解产生的概念和功能还破坏了整个代码库的完整性。其他程序员在完全不知情的情况下，可能已经在这些不好的想法上构建了更多的代码。这使得从代码库里整个移除这些错误实现的代码变得非常困难。</p>

<p>所以我们需要一种过滤来保护我们的代码库远离这些被误解的想法。</p>

<p>
<h6>1.1 自动化验收测试</h6>
</p>

<p>
自动化验收测试的想法最初来自极限编程(XP)，更确切地说起源于测试驱动开发的实践。开发人员和业务相关人员合作编写能满足业务相关人员需求的自动化测试，而不是由业务相关人员直接把需求交与开发团队。我们称这种测试为自动化验收测试。这些测试一开始是不能运行的，因为代码还没有写。但是它抓住了业务相关人员真正关注的，同时也给大家一个明确的信号，嗯，这些是要做的。
</p>

<p>
这类测试和单元测试不同之处在于：自动化验收测试是针对开发人员的，它可以帮助开发人员正确地写出并检查他们的软件设计。有时候我们说单元测试确保你正确地构建出产品（build the thing right），而验收测试确保你构建出正确的产品（build the right thing）。
</p>

<p>
自动化验收测试在良好的XP团队之间已经经过多年的实践，但是还是有很多缺乏经验的敏捷团队似乎只看到TDD。正如Lisa Crispin 和 Janet Gregory在Agile Testing: A Practical Guide for Testers and Agile Teams CG08 指出，没有面向业务的自动化验收测试，程序员很难知道哪些单元测试需要编写。自动化验收测试，帮助你的团队集中注意力，并确保在每个迭代里你的工作是你可能会做的最宝贵的东西。你可能还会犯错，但你少了很多-这就意味着你就可以准时回家和享受你的余生。

</p>

<h6>1.2 行为驱动开发</h6>

<p>
行为驱动开发，简称BDD，它基于测试驱动开发模式之上，通过规范化那些最杰出的TDD实践者的好习惯，从而规划出的一套开发模式。
我们经常可以看见，客户从他们的观点出发给出了一套验收测试，而我们最棒的TDD们恰恰未能理解或者干脆误解了。而我们BDD的实践者正好
在这里把关，我们将验收测试写成一个个通俗易懂的例子，让每个团队成员都能读懂。而我们正好利用这个过程从客户那边也得到反馈。这样
就确保在开始之前，我们就知道即将做的软件是正确的，是客户想要的。
在这个过程中，我们有意识地创建了一门大家都看得懂，易于分享的通用语言。
</p>

<h6>通用语言</h6>

<p>
正如Eric Evans在Domain Driven Design里描述的，在许多软件项目，软件工程师和某领域专家的交流十分的痛苦，而且没有质量。专家有专家的术语，工程师有工程师的暗号。
正是意识到这点，如果有一门通用语言，那么所有项目相关人员都可以使用，都能明白。撇弃每个人的方言，在交谈中，在文档中，在代码中，都使用这通用语言，那样就会大大
降低误解的几率。
</p>

<p>
Cucumber的出现正好可以帮助团队使用通用语言，让开发人员和领域专家有一个可沟通的环境。Cucumber测试案例可以直接和代码交互，但是这些测试代码用一种中间层的语言
撰写，而这个语言也正是我们的客户或者专家能明白的。通过开发人员和客户一起撰写这种测试，不仅能让开发人员明白他们即将实现的是什么样子的行为，更能让他们学习
如何用更通常的语言来描述软件行为，以便于让每个人都能明白。
</p>

<p>
在开始开发之前，写这些测试，我们可以探究并消除许多误解，在这些误解进入代码之前。
</p>

<h6>例子</h6>

<p>
使Cucumber可以在许许多多同样类型的测试套件中脱颖而出的原因在于它经过了专门的设计，来保证团队里的每个人都能读写这些验收测试。
事实上，这也表明了验收测试的价值所在：一个用来沟通和合作的工具。Cucumber测试的易读性可以让客户参与到这个过程中，并真正帮助你
探究和理解他们的需求。

这里有一个例子：

```ruby
Feature: Sign up
    Sign up should be quick and friendly.

    Scenario: Successful sign up
        New users should get a confirmation email and be greeted
        personally by the site once signed in.

        Given I have chosen to sign up
        When I sign up with valid details
        Then I should receive a confirmation email
        And I should see a personalized greeting message

    Scenario: Duplicate email

        Where someone tries to create an account for an email address
        that already exists.

        Given I have chosen to sign up
        But I enter an email address that has already registered
        Then I should be told that the email is already registered
        And I should be offered the option to recover my password
```

可以注意到，我们用特定的场景来描述测试案例。这样的形式有意想不到的效果，人们可以直观的看到这个系统的行为，即使这个系统还没开始开发。
任何团队成员可以读懂这样的测试并告诉你这是否是系统真正想要做的。同样它会激发你的想象力，举一反三。
</p>

<p>
用这种形式撰写的验收测试就不仅仅是测试。它们是可执行的规范。
</p>

<h6>活文档</h6>

<p>因为业务相关人士可以撰写 Cucumber 测试，所以 Cucumber  不仅有传统文档的优点， 更有着它独一无二的优势，就是可以随时在电脑上运行。
这也意味着它不像传统文档那样写好了就放在那里，等它慢慢过时。 Cucumber 测试成为一个活着的东西并至始至终反应着整个项目的状态。</p>

<p><strong>真相的源头</strong></p>

<p>对于很多团队来说，需要明确一个系统到底要做什么，但是很多时候，开发并不真正了解需求，只有在写代码的时候，才突然恍然大悟，“哦！原来如此！”，
又或者勃然大怒，“这根本就行不通，需求要改”。又或者项目经理突然说“哎呀，这地方要加个超链接”等等。总是会有不和谐的地方出现。
<strong>所以我们花费大量的时间去同步需求文档，测试和代码。</strong>
不幸的是，很多情况经常改了代码，忘记改测试，改了测试忘记改需求，于是到后来差别越来越大，也越来越难维护。</p>

<p>Cucumber 测试就是把这些需求的东西都剥离出来，在一个单独的地方来追踪这些信息，这样无论是哪个环节出错，你只需要去更改 Cucumber 测试。
这样就可以节约许多时间。这也能帮助建立团队间的信任，因为真相只有一个 Cucumber，没有人会有不同的观点。</p>

<h6>Cucumber 是如何工作的</h6>

</article>


<section id="comment">
  <!-- Duoshuo Comment BEGIN -->
<div class="ds-thread"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"jinhengwen" };
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>
<!-- Duoshuo Comment END -->


</section>



</div>



<!-- Grab Google CDN's jQuery. fall back to local if necessary -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>window.jQuery || document.write("<script src='/scripts/jquery-1.8.2.min.js'>\x3C/script>")</script>
<script type="text/javascript" src="/scripts/jquery.mousewheel.js"></script>
<script type="text/javascript" src="/scripts/jquery.scrollTo.js"></script>
<script type="text/javascript" src="/scripts/bootstrap.min.js"></script>
<script type="text/javascript" src="/scripts/bootstrap-carousel.js"></script>
<script type="text/javascript" src="/scripts/bootmetro.js"></script>
<script type="text/javascript" src="/scripts/holder.js"></script>
<script type="text/javascript" src="/scripts/tile-slider.js"></script>
<script type="text/javascript">
$(".metro").metro();
</script>

</body>
</html>

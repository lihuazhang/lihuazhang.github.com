<!DOCTYPE html>
<html lang="zh-cn">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="恒温" />


    
    


<meta property="og:type" content="website">
<meta property="og:title" content="八点在家">
<meta property="og:url" content="http://lihuazhang.github.io/page/2/index.html">
<meta property="og:site_name" content="八点在家">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="八点在家">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="八点在家" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">





    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>八点在家</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: false,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: undefined
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/images/avatar.jpeg" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">恒温</a></h1>
        </hgroup>

        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:lihuazhang@hotmail.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="https://github.com/lihuazhang" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Appium/">Appium</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Metro/">Metro</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebDriver/">WebDriver</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/capybara/">capybara</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cocos2d/">cocos2d</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cucumber/">cucumber</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gatling/">gatling</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jmeter/">jmeter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nexus-7/">nexus 7</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pageobject/">pageobject</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ruby/">ruby</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/">vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows/">windows</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zsh/">zsh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/冯唐/">冯唐</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/南京/">南京</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/博客/">博客</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/听来的故事/">听来的故事</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/孩子/">孩子</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/年终总结/">年终总结</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/恐怖/">恐怖</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/抽烟/">抽烟</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/来自qqzone/">来自qqzone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/来自wechat/">来自wechat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/杭州/">杭州</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/电影/">电影</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/移动测试/">移动测试</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/陆犯焉识/">陆犯焉识</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/随笔/">随笔</a></li></ul>
                    </div>
                </section>
                
                
                

                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">恒温</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/images/avatar.jpeg" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">恒温</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:lihuazhang@hotmail.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/lihuazhang" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-webdriveragent-简介" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/05/14/webdriveragent-简介/" class="article-date">
      <time datetime="2016-05-14T10:49:52.000Z" itemprop="datePublished">2016-05-14</time>
</a>

 
    <a href="/2016/05/14/webdriveragent-简介/#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
        
            <span class="disqus-comment-count" data-disqus-identifier="2016/05/14/webdriveragent-简介/"></span>
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/14/webdriveragent-简介/">WebDriverAgent 简介</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <h1 id="WebDriverAgent-是什么"><a href="#WebDriverAgent-是什么" class="headerlink" title="WebDriverAgent 是什么"></a>WebDriverAgent 是什么</h1><p><img src="https://testerhome.com/photo/2016/0b2b5ddb75af0e237e6f41765d5c475e.png" alt=""></p>
<p>去年的 SeleniumConf 上，Facebook 推出了一款新的iOS移动测试框架 —— WebDriverAgent，当时的推文上，写的还只支持模拟器。半年过过去了，如今在看官方github —— <a href="https://github.com/facebook/WebDriverAgent，已经宣称支持真机测试了（亲测的确支持）。我把它的" target="_blank" rel="external">https://github.com/facebook/WebDriverAgent，已经宣称支持真机测试了（亲测的确支持）。我把它的</a> ReadMe 搬运过来：</p>
<blockquote>
<p>WebDriverAgent 在 iOS 端实现了一个 <a href="https://w3c.github.io/webdriver/webdriver-spec.html" target="_blank" rel="external">WebDriver server</a> ，借助这个 server 我们可以远程控制 iOS 设备。你可以启动、杀死应用，点击、滚动视图，或者确定页面展示是否正确。This makes it a perfect tool for application end-to-end testing or general purpose device automation.（它说它是iOS上一个完美的e2e的自动化解决方案） It works by linking <code>XCTest.framework</code> and calling Apple’s API to execute commands directly on a device.（链接<code>XCTest.framework</code>调用苹果的API直接在设备上执行命令） WebDriverAgent is developed and used at Facebook for end-to-end testing and is successfully adopted by <a href="http://appium.io/" target="_blank" rel="external">Appium</a>. （Appium封装工作正在进行中，如果一旦封装好，那么以后就可以直接用Appium提供的binding了。）It is currently maintained by <a href="https://github.com/marekcirkos" target="_blank" rel="external">Marek Cirkos</a> and <a href="https://github.com/mmmulani" target="_blank" rel="external">Mehdi Mulani</a>.</p>
</blockquote>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术/">技术</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/移动测试/">移动测试</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/2016/05/14/webdriveragent-简介/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-南京之行" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/29/南京之行/" class="article-date">
      <time datetime="2015-12-29T14:55:37.000Z" itemprop="datePublished">2015-12-29</time>
</a>

 
    <a href="/2015/12/29/南京之行/#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
        
            <span class="disqus-comment-count" data-disqus-identifier="2015/12/29/南京之行/"></span>
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/29/南京之行/">南京之行</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><img src="/photos/nanjin.png" alt=""></p>
<p>这是我第一次开车去外省。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/生活/">生活</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/南京/">南京</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-2013-03-15-8atmyhouse" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/17/2013-03-15-8atmyhouse/" class="article-date">
      <time datetime="2015-12-17T06:18:00.000Z" itemprop="datePublished">2015-12-17</time>
</a>

 
    <a href="/2015/12/17/2013-03-15-8atmyhouse/#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
        
            <span class="disqus-comment-count" data-disqus-identifier="2015/12/17/2013-03-15-8atmyhouse/"></span>
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/17/2013-03-15-8atmyhouse/">8atmyHouse</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>这篇文章写于2013年03月15日，两年多过去了，我的愿望还是没有实现。最近看雪论坛的 Aker 猝死了，好好地散步就倒地身亡了。微信圈里转了个帖子，说腾讯游戏加班没天理，他们来年的愿望是晚上 8 点能准时下班，我感觉很惊讶，难道他们忘记了劳动法是8小时工作制吗？难怪人家说违法的事情来钱快。</p>
<p>Aker 之前，阿里云最近也挂了一个，也是站着猝死了。这年头猝死的人越来越多，现在只是耳闻，不知道什么时候就发生在身边或者自己身上。但是这些噩耗，似乎并没有什么卵用，就像大海里淹死只蚊子一般，波澜都没有。移动互联网时代，大跃进时代，拼命时代。升官发财请走别路，贪生怕死莫入此门。</p>
<p>说实在，每一次的死亡对我们都很伤，瞬间你就不知道自己坚持的事情到底对不对了。我看到知乎上，知乎侠们在喷各种加班——<a href="https://www.zhihu.com/question/38567964" target="_blank" rel="external">如何看待《腾讯互娱员工猝死，同事呼吁公司少加班》？</a>。他们估计是在加班的时候讨论下加班。<strong>我们这样大一个群体，有着高学历，高智商的一个所谓精英群体，一起做着不合法，不合理的事情，然而没有任何一个人出来反抗，这是我感到最痛苦的。而另我更痛苦的是，我也是其中一员。</strong></p>
<p>这大概真得是一条必经之路，社会到了这个需要各行各业都出来拼的阶段。安逸的生活从此不在。</p>
<hr>
<p>我工作 6 年。 2 年徐汇， 2 年 黄浦， 2 年浦东。我住宝山区。我从一开始的愿望就是能踏着晨光上班，踩着夕阳下班。从来或者很少实现。有几次生病的下午，实在顶不住，请假回家，当地铁从地下穿入高空的时候，晴脆的阳光撒进车厢，我就想什么时候我可以不用朝九晚六。</p>
<p>8 at my house 说起来有段历史。2009 年，我外派在 Google DE 项目工作，8atmyHouse 就是这个项目的一个公用密码，很忙，每个人都希望晚上八点能到家。不知道别人怎样，反正我能刚刚好，想来在 google 上海的那段时间算得上是我职业生涯最快活的一段了。</p>
<p>离开之后，去了更远的张江集电港的 AMD， 每天 6 点出门，晚上 9 点到家。早上刮的干净的脸庞，晚上已胡子拉渣。除了感叹上海之大之外，也恨宝山怎么没有高科技。三个月之后实在受不了，投了几份简历之后，有幸去了稍微近一点的浦东南路的智涌。上班一个小半时，下班一个半小时，每天在跨越整个上海，从浦西到浦东，放在过去，就是每天去上海上班。</p>
<p>我到智涌后，也沿袭了 8atmyHouse 做密码的习惯。同事总会问，为什么用这个密码，我说希望八点能在家坐在沙发上看看电视看看书。他们又会问，能行么？我说看运气，如果永远踩着点，不落下任何一班车，那晚上8点半的时候，我可以坐在家里的电脑前。否则那八成还在回家的路上。同事问的多了，后来连老板也调侃我，比如最近夏令时了，是不是应该改成 7atmyHouse 。我其实想说这不是都靠老板你了么？</p>
<p>八点在家，说起来是多么容易的事情啊，这 6 年却有几次？也许再有猎头找我的时候，我一定告诉他，我要求不高，8 at my home!</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/生活/">生活</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/博客/">博客</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-2013-08-08-cucumberhe-capybaraxia-de-pageobject" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/12/16/2013-08-08-cucumberhe-capybaraxia-de-pageobject/" class="article-date">
      <time datetime="2015-12-16T13:46:07.000Z" itemprop="datePublished">2015-12-16</time>
</a>

 
    <a href="/2015/12/16/2013-08-08-cucumberhe-capybaraxia-de-pageobject/#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
        
            <span class="disqus-comment-count" data-disqus-identifier="2015/12/16/2013-08-08-cucumberhe-capybaraxia-de-pageobject/"></span>
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/16/2013-08-08-cucumberhe-capybaraxia-de-pageobject/">Cucumber 和 Capybara 下的 PageObject</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>接上篇 <a href="/blog/step-defintionshi-kong.html">由 step definition 失控引发的讨论和思考</a>。</p>
<h2 id="PageObject"><a href="#PageObject" class="headerlink" title="PageObject"></a>PageObject</h2><p>先来看下目录结构</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">.</div><div class="line">├── Gemfile</div><div class="line">├── Gemfile.lock</div><div class="line">├── README</div><div class="line">├── Rakefile</div><div class="line">├── cucumber.yml</div><div class="line">├── features</div><div class="line">│   ├── example</div><div class="line">│   │   ├── example.feature</div><div class="line">│   │   ├── step_definitions</div><div class="line">│   │   │   └── example_steps.rb</div><div class="line">│   │   └── support</div><div class="line">│   │       └── env.rb</div><div class="line">│   └── blog_project</div><div class="line">│       ├── user_management</div><div class="line">|       |     |---  login.feature</div><div class="line">|       |     |---  logout.feature</div><div class="line">│       ├── post_management</div><div class="line">|       |     |---  write_a_post.feature</div><div class="line">│       ├── upload_image.feature</div><div class="line">│       ├── pages</div><div class="line">│       │   ├── login_page.rb</div><div class="line">│       │   └── post_page.rb</div><div class="line">│       ├── step_definitions</div><div class="line">│       │   ├── post_step.rb</div><div class="line">│       │   ├── user_step.rb</div><div class="line">│       │   ├── common_steps.rb</div><div class="line">│       └── support</div><div class="line">│           ├── env.rb</div><div class="line">│           └── helper</div><div class="line">│               └── path.rb</div><div class="line">└── features_report.html</div></pre></td></tr></table></figure>
<ol>
<li>把 features 按照模块用目录分类。</li>
<li>将 page object 放在 pages 目录下。</li>
<li>每一个模块一个 step definition rb 文件。</li>
<li>在 support 里配置各种环境啊，hook啊，帮助类等。</li>
</ol>
<p>其实无论你怎么写， cucumber 运行的时候，都会把这些 rb 一股脑儿加载进来。所以对于<br>cucumber 来说什么样子的目录结构对它无所谓，所以对我们而言，只要方便管理就可以了。</p>
<p>现在我们就要在 pages 这个目录做文章。在 cucumber 下使用 pageobject 一般有两种方法：</p>
<h3 id="1-自己封装"><a href="#1-自己封装" class="headerlink" title="1. 自己封装"></a>1. 自己封装</h3><p><em>自己封装 pageobject 的过程其实就是把 webdriver page object java 的那一套翻译成  ruby。</em></p>
<ul>
<li>提取页面元素</li>
<li>封装页面业务逻辑</li>
</ul>
<p>比如：</p>
<p>login_page.rb</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginPage</span></span></div><div class="line"></div><div class="line">  URL = <span class="string">"/login"</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">initialize</span><span class="params">(session)</span></span></div><div class="line">    @session = session</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">visit</span></span></div><div class="line">    @session.visit URL</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">username_input_element</span></span></div><div class="line">    @session.find <span class="string">"input[name=username]"</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">password_input_element</span></span></div><div class="line">    @session.find <span class="string">"input[name=password]"</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">login</span> <span class="title">name</span>, <span class="title">password</span></span></div><div class="line">    username_input_element.type name</div><div class="line">    password_input_element.type password</div><div class="line">    @session.click_button(<span class="string">"login"</span>)</div><div class="line">  <span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>login_stepdef.rb</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Given /^I am in the home page$/ do</div><div class="line">  @login_page = LoginPage.new(Capybara.current_session)</div><div class="line">  @login_page.visit</div><div class="line">end</div><div class="line"></div><div class="line">When /^I login with usernmae &quot;test&quot; and password &quot;test&quot;$/ do |name, password|</div><div class="line">  @login_page.login name, password</div><div class="line">end</div></pre></td></tr></table></figure>
<h3 id="2-使用现成的-gem"><a href="#2-使用现成的-gem" class="headerlink" title="2. 使用现成的 gem"></a>2. 使用现成的 gem</h3><p>ruby 界最不缺的就是第三方实现了。github 里一搜一大把。</p>
<h4 id="我最早用的是-cheezy-page-object"><a href="#我最早用的是-cheezy-page-object" class="headerlink" title="我最早用的是 cheezy/page-object"></a>我最早用的是 <code>cheezy/page-object</code></h4><p>&gt;</p>
<blockquote>
<ol>
<li>A Simple DSL you can use to define and interact with the content on your page</li>
<li>Support for both watir-webdriver and selenium-webdriver</li>
<li>An easy way of creating and using page objects in your cucumber steps or in rspec</li>
<li>A Simple way of dealing with Frames and iFrames</li>
<li>Robust way of dealing with Ajax Calls</li>
<li>A clean way of handling Javascript Popups</li>
<li>Support for most html Elements</li>
</ol>
</blockquote>
<p>使用非常简单：</p>
<p>login_page.rb</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginPage</span></span></div><div class="line">  <span class="keyword">include</span> PageObject</div><div class="line"></div><div class="line">  text_field(<span class="symbol">:username</span>, <span class="symbol">:id</span> =&gt; <span class="string">'username'</span>)</div><div class="line">  text_field(<span class="symbol">:password</span>, <span class="symbol">:id</span> =&gt; <span class="string">'password'</span>)</div><div class="line">  button(<span class="symbol">:login</span>, <span class="symbol">:id</span> =&gt; <span class="string">'login'</span>)</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">login_with</span><span class="params">(username, password)</span></span></div><div class="line">    <span class="keyword">self</span>.username = username</div><div class="line">    <span class="keyword">self</span>.password = password</div><div class="line">    login</div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>login_stepdef.rb</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Given /^I am <span class="keyword">in</span> the home page$/ <span class="keyword">do</span></div><div class="line">  visit HOME_PATH</div><div class="line">  @login_page = LoginPage.new(Capybara.current_session)</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">When /^I login with usernmae <span class="string">"test"</span> <span class="keyword">and</span> password <span class="string">"test"</span>$/ <span class="keyword">do</span> <span class="params">|name, password|</span></div><div class="line">  @login_page.login_with name, password</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>具体可以移步：<a href="https://github.com/cheezy/page-object/wiki/Get-me-started-right-now!" target="_blank" rel="external">Get started!</a></p>
<p>说心里话，如果不是用 capybara 的话， 在 ruby 下写 webdriver 自动化，必然首选 <code>cheezy/page-object</code>。</p>
<h4 id="我们这次选择了-SitePrism"><a href="#我们这次选择了-SitePrism" class="headerlink" title="我们这次选择了 SitePrism"></a>我们这次选择了 <a href="https://github.com/natritmeyer/site_prism" target="_blank" rel="external">SitePrism</a></h4><blockquote>
<p>A Page Object Model DSL for Capybara<br>SitePrism gives you a simple, clean and semantic DSL<br>for describing your site using the Page Object Model pattern, for use with Capybara in automated acceptance testing.</p>
</blockquote>
<p>在 cucumber 中使用 SitePrism 需要加入依赖</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">require &apos;capybara&apos;</div><div class="line">require &apos;capybara/cucumber&apos;</div><div class="line">require &apos;selenium-webdriver&apos;</div><div class="line">require &apos;site_prism&apos;</div></pre></td></tr></table></figure>
<p>其实只要在 Gemfile 中加入以下 gem 即可：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">gem &quot;cucumber-rails&quot;</div><div class="line">gem &quot;capybara&quot;</div><div class="line">gem &quot;site_prism&quot;, &quot;~&gt; 2.4&quot;</div></pre></td></tr></table></figure>
<p>使用同样非常简单：</p>
<p>login_page.rb</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginPage</span> &lt; SitePrism::Page</span></div><div class="line">  set_url <span class="string">"/login"</span></div><div class="line"></div><div class="line">  element <span class="symbol">:username_input_field</span>, <span class="string">"input[name='username']"</span></div><div class="line">  element <span class="symbol">:password_input_field</span>, <span class="string">"input[name='password']"</span></div><div class="line">  element <span class="symbol">:login_button</span>, <span class="string">"button[name='login']"</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">login_with</span> <span class="title">username</span>, <span class="title">password</span></span></div><div class="line">    username_input_element.type username</div><div class="line">    password_input_element.type username</div><div class="line">    login_button.click</div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>login_stepdef.rb</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Given /^I am <span class="keyword">in</span> the home page$/ <span class="keyword">do</span></div><div class="line">  @login_page = LoginPage.new <span class="comment"># 不用传 driver 哦~</span></div><div class="line">  @login_page.load</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">When /^I login with usernmae <span class="string">"test"</span> <span class="keyword">and</span> password <span class="string">"test"</span>$/ <span class="keyword">do</span> <span class="params">|name, password|</span></div><div class="line">  @login_page.login_with name, password</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>可以看得出，page object 的方案还是很多的，自己定义比较灵活，轻巧，使用 gem 可以省去不少心思。<br>个人建议是，使用 gem， 如果gem 无法完成的，再上自己封装！</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术/">技术</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/capybara/">capybara</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cucumber/">cucumber</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/pageobject/">pageobject</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-我想请你来听听蛙鸣声" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/05/08/我想请你来听听蛙鸣声/" class="article-date">
      <time datetime="2014-05-08T09:02:07.000Z" itemprop="datePublished">2014-05-08</time>
</a>

 
    <a href="/2014/05/08/我想请你来听听蛙鸣声/#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
        
            <span class="disqus-comment-count" data-disqus-identifier="2014/05/08/我想请你来听听蛙鸣声/"></span>
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/05/08/我想请你来听听蛙鸣声/">我想请你来听听蛙鸣声</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>以前看过一部台湾的电影，年轻人爱上了大自然的声音，拿着各种专业的录音设备，去海边，去森林，录潮汐声，录松树的声音，然后把卡带寄给心爱的女孩。</p>
<p>我很久没有听过那么齐整的蛙鸣，在晚风中，在西溪园区靠水的围栏边，我知道那一片黑暗是水和沼泽，蛙群鼓足勇气迎接夏天。我想打电话给顾吉辰，然后把手机贴向黑暗蛙鸣过来的地方，告诉她这边还有自然。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/生活/">生活</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/来自qqzone/">来自qqzone</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/杭州/">杭州</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-你好陌生人" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/04/30/你好陌生人/" class="article-date">
      <time datetime="2014-04-30T09:21:30.000Z" itemprop="datePublished">2014-04-30</time>
</a>

 
    <a href="/2014/04/30/你好陌生人/#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
        
            <span class="disqus-comment-count" data-disqus-identifier="2014/04/30/你好陌生人/"></span>
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/04/30/你好陌生人/">你好陌生人</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>我以前从没试过失那么久的眠，我以前从没试过出那么久的差，我以前从没试过出那么久的差的时候在旅馆失那么久的眠。我现在都试过了。</p>
<p>我把吹风机架在枕头上，我把刚洗的衣服挂在床沿上。我大学的时候干过这个事情。特别是放假回家前的晚上，大家都急着晒干衣服。每一个寝室的电扇上都会挂着条泛黄的内裤或者内衣。穿着裤衩的我们举着电吹风。</p>
<p>我在杭州读的大学，我一直想我大概再也没有机会干这事情了。我想的事情一直很不准。</p>
<p>我的朋友金金一直出差，我认识他快20多年，他有一半时间在出差，另一半时间在出差的路上。</p>
<p>出差是一种生活态度。有的人很惬意，有的人很苦恼。对我而言，就是偶尔想家和我的锦新和锦年。</p>
<p>10年的时候，我在北京出了一次差。金金从天津跑来看我，我们在新年旅舍没有窗户的房间睡了一晚，在大永和吃了早饭，然后他回去。我在谷歌大楼待了两天也回了上海。</p>
<p>对于宅男而言，永远想不到出去走走。我在杭州读书的时候，除了寝室最熟悉的就是食堂了。而校园以外，那不是宅男该去的。</p>
<p>07年夏天，我毕业，和发证书的老师大吵一架后，叫了辆残疾车，沿着西湖直奔火车站，扬长而去。从此，留在杭州的一切过往都是陌生人。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/生活/">生活</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/来自qqzone/">来自qqzone</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-读冯唐" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/02/18/读冯唐/" class="article-date">
      <time datetime="2014-02-18T13:44:00.000Z" itemprop="datePublished">2014-02-18</time>
</a>

 
    <a href="/2014/02/18/读冯唐/#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
        
            <span class="disqus-comment-count" data-disqus-identifier="2014/02/18/读冯唐/"></span>
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/02/18/读冯唐/">读冯唐</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>我在微博上@多看阅读，说上帝给了我多看，我却用它来看冯唐。多看没有回复我，我想她大概不好意思，我一直觉得客服是美眉。我有个同学家里网络不好，打电话给客服美眉，客服说你设置错了。我同学大怒，说我计算机博士，于是客服美眉就不好意思了，给他换了路由器。多看推出微信大号的时候说24小时人工服务，我回她说扯淡，明明机器人回复。结果她和我聊起来了，应该没有那么智能的机器人。同样是搞计算机的，本科和博士到底不一样。</p>
<p>我最近写文章变的矫情刻薄，我都怪冯唐。我老婆说你写的酸死了，像个屌丝。我说冯唐看多了，她说啥是冯唐？我说一屌丝。感觉还是没多少人知道冯唐，就像没多少人知道王小波写程序一样。我总觉得秋水是学计算机的，因为只有计算机，能出文艺屌丝。</p>
<p>秋水比我们大一个十年。他读到博士的时候，我们估计还在初中拿红领巾擦鼻涕。知识就是力量，这也是为什么我初一的时候打不过初三的流氓的原因。</p>
<p>所以我应该也打不过冯唐，好吃不过饺子，流氓不过冯唐。只有他那么自在地写着肉欲横流的青春。什么能让案板上的猪胸脯吸引人，给它按两个奶子。那样的年纪看完岛国片估计能红着眼到处物色奶子。</p>
<p>我一直想青春是什么，是年纪，是思想，还是身体？直到雨季来了，赵忠祥老师说，草原上的雄狮开始物色母狮。原来这才是青春。</p>
<p>我这才发现我不仅开始尖酸刻薄，我还满嘴污言秽语。我都怪冯唐。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/读书笔记/">读书笔记</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/冯唐/">冯唐</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/来自qqzone/">来自qqzone</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-2013-12-26-fan-yi-android-and-ios-support" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/12/26/2013-12-26-fan-yi-android-and-ios-support/" class="article-date">
      <time datetime="2013-12-26T13:37:00.000Z" itemprop="datePublished">2013-12-26</time>
</a>

 
    <a href="/2013/12/26/2013-12-26-fan-yi-android-and-ios-support/#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
        
            <span class="disqus-comment-count" data-disqus-identifier="2013/12/26/2013-12-26-fan-yi-android-and-ios-support/"></span>
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/12/26/2013-12-26-fan-yi-android-and-ios-support/">[翻译]Android and iOS Support</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>简而言之：我们准备淘汰 Selenium 自己的 AndroidDriver 和 iPhoneDriver，改用 Selendroid，iosdriver 和 Appium中的任意一个。如果你正在使用 Selenium 的 mobile driver 中的一个的话，请评价下这些替代品。</p>
<p>正文：</p>
<p>在 2007 年， 乔布斯发布了 iPhone，从此移动web从本来的新奇事物走上了主流，成为大众的宠儿。如今的趋势预示着在不远的将来，移动 web 的使用将超过桌面应用的使用。移动 Web 将成为你站点重要一部分，而且在移动设备上测试你的网站将是一个明智的想法。而这在未来将会持续一段时间。</p>
<p>Selenium 项目通过实现 iOS 和 Android 版本的 webdriver 来回应崛起的移动 web。在2009年初期，我们加入了 iPhoneDriver (在 iPad 上也能工作)。2010年6月，最初由 Google 工程师开发的 AndroidDriver 也加入了阵营。 直到今天，你能在官方 Android SDK 的下载选项中发现 “Google WebDriver”的身影。</p>
<p>在最初的工作完成之后，一些有趣的事情发生了。在 Selenium 项目之外，坊间对这些移动 driver 做了很多实验性的扩展和修改。第一个就是“nativedriver”，我也参与于此。它采用了一个新奇的方式，使用熟悉的 WebDriver 接口，允许用户和手机(Android 或者 iOS)原生的 UI 交互。我第一次见到它时，惊呆了。但是开发它的工程师很快就向我证明了这是有意义的。你猜怎样，他们是对的。</p>
<p>可惜的是，在证明这个主意是可行且能工作后，NativeDriver 项目突然失去了动力。但是，它给其他三个项目做好了准备，这三个项目采用了它的理念，创造了非常棒的移动测试软件，他们就是：  Selendroid， iosdriver 和 Appium。这三个项目都允许用户用熟知的 WebDriver 接口来测试iOS 和 Android 上的应用。不仅仅是原生的应用，也包括混合或者纯web的应用。最近 Windows Phone WebDriver 也加入了他们，我们可以用来测试 WinPhone 8 上的移动 web 应用。</p>
<p>这些项目都有一个共同点：他们比 Selenium 移动主项目更加地活跃，更能胜任移动测试工作，也已经走的更远。事实上，原先在 AndroidDriver 和 iPhoneDriver 上的贡献者也开始在这些项目上工作了。我们需要维护不同 driver 间的互通性，允许用户选择最适合他们的框架，而不必担心他们的测试会需要大量重构。</p>
<p>这就意味着在 selenium 项目中继续保留 AndroidDriver 和 iPhoneDriver 已经不能帮助用户了。那些替代者才是更好的选择。保留这些所谓官方的 driver 只会污染了项目。而且更糟糕的是，selenium 的开发修复这些 driver 上的 bug 非常慢，而这些 bug 让每个参与与此的人都非常沮丧。鉴于此，Selenium 项目决定删除这些driver的代码。我们推荐大家评估那些备选的其中之一使用。</p>
<p>当然，这些代码会仍然保留在我们的代码历史中，所以如果你想自己构建一个的话，还是有可能的。最新的 iPhoneDriver 是 ef9d578，最新的 AndroidDriver 代码是 00a3c7d。我们已经上传了最新版本的 AndroidDriver 供你下载。</p>
<p>这些改变并不意味着我们不再支持移动测试。它意味着我们只支持最好的 mobile WebDriver 实现，只是他们不是 Selenium 项目的一部分而已。</p>
<p>原文见 <a href="http://seleniumhq.wordpress.com/2013/12/24/android-and-ios-support/?utm_source=feedburner&amp;utm_medium=feed&amp;utm_campaign=Feed%3A+Selenium+%28The+Official+Selenium+Blog%29" target="_blank" rel="external">http://seleniumhq.wordpress.com/2013/12/24/android-and-ios-support/?utm_source=feedburner&amp;utm_medium=feed&amp;utm_campaign=Feed%3A+Selenium+%28The+Official+Selenium+Blog%29</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术/">技术</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/移动测试/">移动测试</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-2013-10-15-you-xi-kai-fa-chang-yong-gai-nian" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/10/15/2013-10-15-you-xi-kai-fa-chang-yong-gai-nian/" class="article-date">
      <time datetime="2013-10-15T13:37:00.000Z" itemprop="datePublished">2013-10-15</time>
</a>

 
    <a href="/2013/10/15/2013-10-15-you-xi-kai-fa-chang-yong-gai-nian/#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
        
            <span class="disqus-comment-count" data-disqus-identifier="2013/10/15/2013-10-15-you-xi-kai-fa-chang-yong-gai-nian/"></span>
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/10/15/2013-10-15-you-xi-kai-fa-chang-yong-gai-nian/">游戏开发常用概念</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>zz from <a href="http://xiandanboke.com.cn/game.html" target="_blank" rel="external">守望者科技博客</a></p>
<p>游戏开发中，需要了解 概念，分别是导演、场景、布景和人物角色。这几个概念和拍电影相似，那么我们就拿电影和游戏做对比，一一讲解这几个概念。</p>
<ul>
<li><em>导演</em>（在cocos2d-x引擎中与之对应的类事CCDirector）。游戏里，导演是游戏创作的组织者和领导者，是把游戏策划变成游戏的总指挥，导演制定规则让游戏内的场景、布景和人物角色有序地运行。</li>
<li><p><em>场景</em>（在cocos2d-x引擎中与之对应的类事CCScene)。场景是一个个的关卡，关卡主要有布景和人物角色组成。</p>
</li>
<li><p><em>布景</em>（在cocos2d-x引擎中与之对应的类事CClayer)。布景是每个关卡里面的背景，同样，不同的关卡需要的背景也是完全不一样的。</p>
</li>
<li><em>人物角色</em>（在cocos2d-x引擎中与之对应的类事CCSprite)。人物角色包括游戏的主玩家和其他玩家了。其他玩家既可以是一个真实的玩家，也可以是游戏虚拟出来的玩家。</li>
<li><em>动作</em>（在cocos2d-x引擎中与之对应的类事CCAction)。动作是游戏内人物角色的动作。</li>
<li><em>摄像机</em>（CCCamera），每个节点都需要使用摄像机，当节点发生缩放，旋转，和位置变化时，都需要覆盖摄像机，让这个节点通过摄像机重新渲染。</li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术/">技术</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cocos2d/">cocos2d</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-2013-10-09-cron-jobs-and-random-times-within-giving-hours" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2013/10/09/2013-10-09-cron-jobs-and-random-times-within-giving-hours/" class="article-date">
      <time datetime="2013-10-09T13:37:00.000Z" itemprop="datePublished">2013-10-09</time>
</a>

 
    <a href="/2013/10/09/2013-10-09-cron-jobs-and-random-times-within-giving-hours/#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
        
            <span class="disqus-comment-count" data-disqus-identifier="2013/10/09/2013-10-09-cron-jobs-and-random-times-within-giving-hours/"></span>
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/10/09/2013-10-09-cron-jobs-and-random-times-within-giving-hours/">Cron jobs and random times, within giving hours</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>最近给 <code>Dota 圣剑传说</code> 添加一个随机活动，每小时里在聊天室生成一个 <code>黄金巨龙来袭事件</code>。从 stackoverflow 找来一个方法如下：</p>
<p><a href="http://stackoverflow.com/questions/9049460/cron-jobs-and-random-times-within-giving-hours" target="_blank" rel="external">http://stackoverflow.com/questions/9049460/cron-jobs-and-random-times-within-giving-hours</a></p>
<p>If I understand what you’re looking for, you’ll need to do something a bit messy, like having a cron job that runs a bash script that randomizes the run times… Something like this:</p>
<p>crontab:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">0 9 * * * /path/to/bashscript</div></pre></td></tr></table></figure>
<p>and in /path/to/bashscript:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line"></div><div class="line">maxdelay=$((14*60))  # 14 hours from 9am to 11pm, converted to minutes</div><div class="line">for ((i=1; i&lt;=20; i++)); do</div><div class="line">    delay=$(($RANDOM%maxdelay)) # pick an independent random delay for each of the 20 runs</div><div class="line">    (sleep $((delay*60)); /path/to/phpscript.php) &amp; # background a subshell to wait, then run the php script</div><div class="line">done</div></pre></td></tr></table></figure>
<p>A few notes: this approach it a little wasteful of resources, as it fires off 20 background processes at 9am, each of which waits around for a random number of minutes (up to 14 hours, i.e. 11pm), then launches the php script and exits. Also, since it uses a random number of minutes (not seconds), the start times aren’t quite as random as they could be. But $RANDOM only goes up to 32,767, and there are 50,400 seconds between 9am and 11pm, it’d be a little more complicated to randomize the seconds as well. Finally, since the start times are random and independent of each other, it’s possible (but not very likely) that two or more instances of the script will be started simultaneously.</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/技术/">技术</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2012-2017 恒温
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>


    

    
        <script id="dsq-count-scr" src="//8atmyhouse.disqus.com/count.js" async></script>
        <script>
            if ($(".left-col").is(":visible")) {
                var $disqusCount = $(".disqus-comment-count");
                $disqusCount.bind("DOMNodeInserted", function(e) {
                    var num = $(this).text().replace(/[^0-9]/ig,"");
                    if (num > 0) {
                        $(this).siblings(".count-comment").text(num);
                    }
                    $(this).remove();
                })
            } else {
                $(".disqus-comment-count").remove();
            }
        </script>
     




<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>